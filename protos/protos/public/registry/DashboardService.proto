syntax = "proto3";

package ai.verta.registry;

import "common/CommonService.proto";
import "google/api/annotations.proto";
import "registry/CustomAttributeService.proto";

option go_package = "github.com/VertaAI/modeldb/protos/gen/go/protos/public/registry";
option java_multiple_files = true;

message Summary {
  string name = 1;
  string display_name = 2;
  float value = 3;
  // int32 precision = N;
  // percent_change = N;
}

message Chart {
  string name = 1;
  string display_name = 2;
  map<string, float> values = 3;
}

message Table {
  string name = 1;
  string display_name = 2;
  repeated Column columns = 3;
  repeated Row rows = 4;

  message Column {
    string name = 1;
    CustomAttributeTypeEnum.CustomAttributeType attribute_type = 2;
  }

  message Row {
    string id = 1;
    map<string, string> values = 2;
  }
}

message Dashboard {
  string name = 1;
  repeated Summary summaries = 2;
  repeated Chart charts = 4;
  repeated Table tables = 3;
}

message GetDashboardByName {
    string dashboard_name = 1;

    message Response {
        Dashboard dashboard = 1;
    }
}

service DashboardService {
  rpc getDashboardByName(GetDashboardByName)
      returns (GetDashboardByName.Response) {
    option (google.api.http) = {
      get: "/v1/registry/dashboard/{dashboard_name}"
    };
  };
}
